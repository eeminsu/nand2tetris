# 가상 머신2 : 프로그램 제어

스택 처리
- 산술 및 불 표현식 계산
- 중첩 서브루틴 호출
- 매개변수 전달
- 재귀
- 연관 메모리 할당

## 프로그램 흐름 제어
- 컴퓨터 프로그램은 한 명령씩 순차적으로 실행하는 방식이 기본
- 이런 순차적 흐름은 분기 명령으로 끊기게 됨
- 저수준 프로그래밍에서는 분기 논리가 다음번 명령어 대신 goto destination 명령으로 프로그램 내 특정 위치부터 실행을 지속하는 방식
- 위치 설정 방법은 바로 다음에 실행될 명령어의 물리적 주소를 지정하는 방식이 가장 기본적
- 더 추상적인 방법으로는 기호 레이블을 통해 점프할 위치를 재지정하는 방법이 있음, 이 방법을 사용하가 위해서는 언어에서 특정 지점에 레이블을 지정하는 지시어를 지원해야 함
</br></br>

## 서브루틴 호출
- 프로그래밍 언어들마다 특정한 내장형 명령 집합이 있음
- 이런 기본적인 명령집합을 프로그래머가 자유롭게 고수준 연산들로 확장 가능하다는 점이 현대 언어의 핵심적인 추상화 원리임
- 내장형 명령호출과 사용자 정의 서브루틴 호출의 차이점은 서브루틴 앞에 call 키워드가 쓰인다는 점 밖에 없음
- 두 연산 모두 호출자가 인수를 설정해주고 스택에서 인수가 삭제되며 반환된 값이 스택 최상단 요소가 됨
- 서브루틴은 보통 지역 변수를 임시 저장소로 활용함
- 이 지역 변수는 서브루틴 실행 시작부터 return명령 까지 메모리에 표현되어야 함
- 그리고 return 시점에서 지역변수가 점유한 메모리 공간이 해제됨
- 재귀 호출을 할 경우 다른 호출들과 독립적으로 실행 되며 그때마다 각각의 지역 변수와 인수들을 유지 관리 해야함
- 서브루틴 호출이 많이 중첩되었더라도 어느 한 시점에는 중첩된 서브루틴들 중 맨 위의 것만 실행되며 아래 있는 다른 서브루틴 호출들은 현재 실행되는 서브루틴이 종료되기를 기다려야 함
- 호출된 서브루틴에서 return 명령으로 반환할 때는 반환될 주소가 며령에 표시되지 않기 때문에 까다로움
- return 명령은 현재 서프루틴을 호출한 call명령의 그 다음 명령으로 점프를 실행하면 됨
- 다음 명령의 메모리 위치를 반환 주소라함